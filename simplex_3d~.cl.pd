#N canvas 0 37 1470 891 12;
#X obj 714 32 inlet~;
#X obj 443 32 inlet~;
#X text 1002 54 multiply by octave factor;
#X obj 547 972 outlet~;
#X obj 1465 972 outlet~;
#X obj 1466 32 inlet~;
#X obj 995 32 inlet~;
#X obj 995 74 *~;
#X obj 715 74 *~;
#X obj 444 74 *~;
#X obj 547 948 *~;
#X text 1521 971 total amplitude outlet;
#X text 1213 31 args: index \, \$0 of calling patch;
#X obj 531 263 wrap~;
#X obj 531 287 *~ 256;
#X text 1169 286 int in range 0..255;
#X text 1518 31 persistence;
#X obj 1491 108 r \$2-harmonic-\$1;
#X obj 1514 274 + 1;
#X obj 1514 250 f \$1;
#X obj 1388 230 pow \$1;
#X obj 1388 147 loadbang;
#X msg 1388 195 2;
#X obj 1537 160 != 0;
#X obj 1537 214 switch~;
#X obj 1388 171 t b b;
#X msg 1420 195 1;
#X obj 1466 71 pow~ \$1;
#X obj 1491 131 t f b f;
#X text 1303 112 initialize octave factor and switch~ on, f 21;
#X text 1525 71 attenuate octave;
#X obj 1465 458 abs~;
#X obj 1215 55 line~;
#X msg 1260 54 \$1 10;
#X obj 1466 421 *~;
#X obj 1491 395 line~;
#X msg 1491 371 \$1 10;
#X obj 1537 187 pipe 10;
#X text 1548 131 manage harmonics;
#X text 1543 274 harmonic factor;
#X text 1536 371 transition;
#X text 1304 54 transition;
#X text 404 94 s;
#X obj 444 113 +~;
#X obj 715 113 +~;
#X obj 995 113 +~;
#X text 387 66 F3;
#X text 473 112 xin+s;
#X text 471 74 xin;
#X text 742 74 yin;
#X text 1023 74 zin;
#X text 743 112 yin+s;
#X text 1023 112 zin+s;
#X obj 444 165 -~;
#X obj 462 141 wrap~;
#X obj 714 165 -~;
#X obj 732 141 wrap~;
#X text 473 165 i;
#X obj 994 165 -~;
#X obj 1012 141 wrap~;
#X text 743 165 j;
#X text 1022 165 k;
#X text 404 184 t;
#X obj 444 204 -~;
#X obj 994 204 -~;
#X obj 714 204 -~;
#X text 472 205 X0;
#X text 742 205 Y0;
#X text 1022 205 Z0;
#X obj 425 239 -~;
#X obj 695 239 -~;
#X obj 975 239 -~;
#X text 453 238 x0;
#X text 723 238 y0;
#X text 1003 238 z0;
#X text 583 286 ii;
#X obj 801 263 wrap~;
#X obj 801 287 *~ 256;
#X obj 1081 263 wrap~;
#X obj 1081 287 *~ 256;
#X text 853 286 jj;
#X text 1133 286 kk;
#X obj 531 239 *~ 0.00390625;
#X obj 801 239 *~ 0.00390625;
#X obj 1081 239 *~ 0.00390625;
#X text 1181 239 /~ 256;
#X text 232 339 x > z;
#X text 523 339 x > y;
#X text 804 339 y > z;
#X obj 280 407 +~;
#X obj 570 388 +~;
#X obj 280 426 tabread~ \$2-i1;
#X obj 450 426 tabread~ \$2-j1;
#X obj 620 426 tabread~ \$2-k1;
#X obj 790 426 tabread~ \$2-i2;
#X obj 960 426 tabread~ \$2-j2;
#X obj 1130 426 tabread~ \$2-k2;
#X obj 570 364 *~ 2;
#X obj 280 364 *~ 4;
#X obj 487 493 -~;
#X obj 487 517 +~;
#X obj 531 493 -~;
#X obj 531 517 +~;
#X obj 795 493 -~;
#X obj 795 517 +~;
#X obj 838 493 -~;
#X obj 838 517 +~;
#X obj 882 493 -~;
#X obj 882 517 +~;
#X obj 444 493 -~;
#X obj 444 517 +~;
#X obj 1148 493 -~ 1;
#X obj 1192 493 -~ 1;
#X obj 1236 493 -~ 1;
#X text 470 516 x1;
#X text 514 516 y1;
#X text 864 516 y2;
#X text 1218 516 y3;
#X text 1263 516 z3;
#X text 908 516 z2;
#X text 558 516 z1;
#X text 821 516 x2;
#X text 1174 516 x3;
#X obj 214 48 loadbang;
#X text 280 141 G3;
#X msg 214 142 0.166667;
#X msg 318 67 0.333333;
#X obj 373 93 *~;
#X obj 373 184 *~;
#X obj 1274 498 * 3;
#X obj 913 498 * 2;
#X obj 1236 517 +~;
#X obj 1192 517 +~;
#X obj 1148 517 +~;
#X obj 81 795 tabread~ \$2-permutmod12;
#X obj 81 699 tabread~ \$2-permutation;
#X obj 81 723 +~;
#X obj 81 747 tabread~ \$2-permutation;
#X obj 81 771 +~;
#X text 111 770 gi0 = permMod12[ii+perm[jj+perm[kk]]];
#X text 432 770 gi1 = permMod12[ii+i1+perm[jj+j1+perm[kk+k1]]];
#X text 781 770 gi2 = permMod12[ii+i2+perm[jj+j2+perm[kk+k2]]];
#X text 1142 770 gi3 = permMod12[ii+1+perm[jj+1+perm[kk+1]]];
#X obj 402 795 tabread~ \$2-permutmod12;
#X obj 402 699 tabread~ \$2-permutation;
#X obj 402 723 +~;
#X obj 402 747 tabread~ \$2-permutation;
#X obj 402 771 +~;
#X obj 403 675 +~;
#X obj 753 795 tabread~ \$2-permutmod12;
#X obj 753 699 tabread~ \$2-permutation;
#X obj 753 723 +~;
#X obj 753 747 tabread~ \$2-permutation;
#X obj 753 771 +~;
#X obj 754 675 +~;
#X obj 571 703 +~;
#X obj 922 703 +~;
#X obj 922 751 +~;
#X obj 571 751 +~;
#X obj 1107 795 tabread~ \$2-permutmod12;
#X obj 1107 699 tabread~ \$2-permutation;
#X obj 1107 747 tabread~ \$2-permutation;
#X obj 1108 675 +~ 1;
#X obj 1107 723 +~;
#X obj 1107 771 +~;
#X obj 1277 703 +~ 1;
#X obj 1277 751 +~ 1;
#X obj 413 547 *~;
#X obj 456 547 *~;
#X obj 499 547 *~;
#X obj 764 547 *~;
#X obj 807 547 *~;
#X obj 851 547 *~;
#X obj 1118 547 *~;
#X obj 1160 547 *~;
#X obj 1202 547 *~;
#X obj 364 618 -~;
#X obj 45 618 -~;
#X obj 425 294 *~;
#X obj 696 294 *~;
#X obj 974 294 *~;
#X obj 383 571 +~;
#X obj 383 595 +~;
#X obj 64 571 +~;
#X obj 64 595 +~;
#X obj 715 618 -~;
#X obj 734 571 +~;
#X obj 734 595 +~;
#X obj 1069 618 -~;
#X obj 1088 571 +~;
#X obj 1088 595 +~;
#X text 74 618 t0;
#X text 394 618 t1;
#X text 744 618 t2;
#X text 1097 618 t3;
#X obj 45 666 *~;
#X obj 45 690 *~;
#X obj 364 666 *~;
#X obj 364 690 *~;
#X obj 715 666 *~;
#X obj 715 690 *~;
#X obj 1069 666 *~;
#X obj 1069 690 *~;
#X obj 44 860 *~;
#X obj 363 860 *~;
#X obj 714 860 *~;
#X obj 1068 860 *~;
#X text 393 862 n1;
#X text 73 862 n0;
#X text 744 862 n2;
#X text 1097 862 n3;
#X obj 547 900 +~;
#X obj 900 880 +~;
#X obj 197 880 +~;
#X text 1595 178 wait for transition before off-switch~, f 19;
#X obj 547 924 *~ 32;
#X text 43 940 algorithm adapted from the code in http://staffwww.itn.liu.se/~stegu/simplexnoise/simplexnoise.pdf, f 63;
#X obj 45 642 max~ 0;
#X obj 364 642 max~ 0;
#X obj 715 642 max~ 0;
#X obj 1069 642 max~ 0;
#X obj 46 429 sig~ 0.5;
#X obj 280 340 gt~;
#X obj 570 340 gt~;
#X obj 850 367 gt~;
#X obj 402 840 simplex_3d~-grad \$2;
#X obj 81 840 simplex_3d~-grad \$2;
#X obj 753 840 simplex_3d~-grad \$2;
#X obj 1107 840 simplex_3d~-grad \$2;
#X connect 0 0 8 0;
#X connect 1 0 9 0;
#X connect 5 0 27 0;
#X connect 6 0 7 0;
#X connect 7 0 45 0;
#X connect 7 0 71 0;
#X connect 7 0 127 0;
#X connect 8 0 44 0;
#X connect 8 0 70 0;
#X connect 8 0 127 0;
#X connect 9 0 43 0;
#X connect 9 0 69 0;
#X connect 9 0 127 0;
#X connect 10 0 3 0;
#X connect 13 0 14 0;
#X connect 14 0 138 1;
#X connect 14 0 158 0;
#X connect 14 0 157 0;
#X connect 14 0 166 0;
#X connect 17 0 28 0;
#X connect 18 0 33 0;
#X connect 19 0 18 0;
#X connect 20 0 33 0;
#X connect 21 0 25 0;
#X connect 22 0 20 0;
#X connect 23 0 37 0;
#X connect 25 0 22 0;
#X connect 25 1 26 0;
#X connect 26 0 24 0;
#X connect 26 0 36 0;
#X connect 27 0 34 0;
#X connect 28 0 36 0;
#X connect 28 1 19 0;
#X connect 28 2 23 0;
#X connect 31 0 4 0;
#X connect 32 0 7 1;
#X connect 32 0 9 1;
#X connect 32 0 8 1;
#X connect 33 0 32 0;
#X connect 34 0 10 1;
#X connect 34 0 31 0;
#X connect 35 0 34 1;
#X connect 36 0 35 0;
#X connect 37 0 24 0;
#X connect 43 0 53 0;
#X connect 43 0 54 0;
#X connect 44 0 56 0;
#X connect 44 0 55 0;
#X connect 45 0 58 0;
#X connect 45 0 59 0;
#X connect 53 0 63 0;
#X connect 53 0 82 0;
#X connect 53 0 128 0;
#X connect 54 0 53 1;
#X connect 55 0 65 0;
#X connect 55 0 83 0;
#X connect 55 0 128 0;
#X connect 56 0 55 1;
#X connect 58 0 64 0;
#X connect 58 0 84 0;
#X connect 58 0 128 0;
#X connect 59 0 58 1;
#X connect 63 0 69 1;
#X connect 64 0 71 1;
#X connect 65 0 70 1;
#X connect 69 0 109 0;
#X connect 69 0 103 0;
#X connect 69 0 111 0;
#X connect 69 0 178 0;
#X connect 69 0 178 1;
#X connect 69 0 222 0;
#X connect 69 0 223 0;
#X connect 69 0 226 1;
#X connect 70 0 99 0;
#X connect 70 0 105 0;
#X connect 70 0 112 0;
#X connect 70 0 179 0;
#X connect 70 0 179 1;
#X connect 70 0 223 1;
#X connect 70 0 224 0;
#X connect 70 0 226 2;
#X connect 71 0 101 0;
#X connect 71 0 107 0;
#X connect 71 0 113 0;
#X connect 71 0 180 0;
#X connect 71 0 180 1;
#X connect 71 0 222 1;
#X connect 71 0 224 1;
#X connect 71 0 226 3;
#X connect 76 0 77 0;
#X connect 77 0 136 1;
#X connect 77 0 155 0;
#X connect 77 0 156 0;
#X connect 77 0 165 0;
#X connect 78 0 79 0;
#X connect 79 0 135 0;
#X connect 79 0 148 0;
#X connect 79 0 154 0;
#X connect 79 0 162 0;
#X connect 82 0 13 0;
#X connect 83 0 76 0;
#X connect 84 0 78 0;
#X connect 89 0 91 0;
#X connect 89 0 96 0;
#X connect 89 0 95 0;
#X connect 89 0 94 0;
#X connect 89 0 93 0;
#X connect 89 0 92 0;
#X connect 90 0 89 1;
#X connect 91 0 109 1;
#X connect 91 0 158 1;
#X connect 92 0 99 1;
#X connect 92 0 155 1;
#X connect 93 0 101 1;
#X connect 93 0 148 1;
#X connect 94 0 103 1;
#X connect 94 0 157 1;
#X connect 95 0 105 1;
#X connect 95 0 156 1;
#X connect 96 0 107 1;
#X connect 96 0 154 1;
#X connect 97 0 90 0;
#X connect 98 0 89 0;
#X connect 99 0 100 0;
#X connect 100 0 168 0;
#X connect 100 0 168 1;
#X connect 100 0 225 2;
#X connect 101 0 102 0;
#X connect 102 0 169 0;
#X connect 102 0 169 1;
#X connect 102 0 225 3;
#X connect 103 0 104 0;
#X connect 104 0 170 0;
#X connect 104 0 170 1;
#X connect 104 0 227 1;
#X connect 105 0 106 0;
#X connect 106 0 171 0;
#X connect 106 0 171 1;
#X connect 106 0 227 2;
#X connect 107 0 108 0;
#X connect 108 0 172 0;
#X connect 108 0 172 1;
#X connect 108 0 227 3;
#X connect 109 0 110 0;
#X connect 110 0 167 0;
#X connect 110 0 167 1;
#X connect 110 0 225 1;
#X connect 111 0 133 0;
#X connect 112 0 132 0;
#X connect 113 0 131 0;
#X connect 123 0 125 0;
#X connect 123 0 126 0;
#X connect 125 0 128 1;
#X connect 125 0 129 0;
#X connect 125 0 130 0;
#X connect 125 0 102 1;
#X connect 125 0 100 1;
#X connect 125 0 110 1;
#X connect 126 0 127 1;
#X connect 127 0 43 1;
#X connect 127 0 44 1;
#X connect 127 0 45 1;
#X connect 128 0 63 1;
#X connect 128 0 65 1;
#X connect 128 0 64 1;
#X connect 129 0 131 1;
#X connect 129 0 133 1;
#X connect 129 0 132 1;
#X connect 130 0 108 1;
#X connect 130 0 104 1;
#X connect 130 0 106 1;
#X connect 131 0 175 0;
#X connect 131 0 175 1;
#X connect 131 0 228 3;
#X connect 132 0 174 0;
#X connect 132 0 174 1;
#X connect 132 0 228 2;
#X connect 133 0 173 0;
#X connect 133 0 173 1;
#X connect 133 0 228 1;
#X connect 134 0 226 0;
#X connect 135 0 136 0;
#X connect 136 0 137 0;
#X connect 137 0 138 0;
#X connect 138 0 134 0;
#X connect 143 0 225 0;
#X connect 144 0 145 0;
#X connect 145 0 146 0;
#X connect 146 0 147 0;
#X connect 147 0 143 0;
#X connect 148 0 144 0;
#X connect 149 0 227 0;
#X connect 150 0 151 0;
#X connect 151 0 152 0;
#X connect 152 0 153 0;
#X connect 153 0 149 0;
#X connect 154 0 150 0;
#X connect 155 0 145 1;
#X connect 156 0 151 1;
#X connect 157 0 153 1;
#X connect 158 0 147 1;
#X connect 159 0 228 0;
#X connect 160 0 163 0;
#X connect 161 0 164 0;
#X connect 162 0 160 0;
#X connect 163 0 161 0;
#X connect 164 0 159 0;
#X connect 165 0 163 1;
#X connect 166 0 164 1;
#X connect 167 0 181 0;
#X connect 168 0 181 1;
#X connect 169 0 182 1;
#X connect 170 0 186 0;
#X connect 171 0 186 1;
#X connect 172 0 187 1;
#X connect 173 0 189 0;
#X connect 174 0 189 1;
#X connect 175 0 190 1;
#X connect 176 0 218 0;
#X connect 177 0 217 0;
#X connect 178 0 183 0;
#X connect 179 0 183 1;
#X connect 180 0 184 1;
#X connect 181 0 182 0;
#X connect 182 0 176 1;
#X connect 183 0 184 0;
#X connect 184 0 177 1;
#X connect 185 0 219 0;
#X connect 186 0 187 0;
#X connect 187 0 185 1;
#X connect 188 0 220 0;
#X connect 189 0 190 0;
#X connect 190 0 188 1;
#X connect 195 0 196 0;
#X connect 195 0 196 1;
#X connect 196 0 203 0;
#X connect 197 0 198 0;
#X connect 197 0 198 1;
#X connect 198 0 204 0;
#X connect 199 0 200 0;
#X connect 199 0 200 1;
#X connect 200 0 205 0;
#X connect 201 0 202 0;
#X connect 201 0 202 1;
#X connect 202 0 206 0;
#X connect 203 0 213 0;
#X connect 204 0 213 1;
#X connect 205 0 212 0;
#X connect 206 0 212 1;
#X connect 211 0 215 0;
#X connect 212 0 211 1;
#X connect 213 0 211 0;
#X connect 215 0 10 0;
#X connect 217 0 195 0;
#X connect 217 0 195 1;
#X connect 218 0 197 0;
#X connect 218 0 197 1;
#X connect 219 0 199 0;
#X connect 219 0 199 1;
#X connect 220 0 201 0;
#X connect 220 0 201 1;
#X connect 221 0 176 0;
#X connect 221 0 177 0;
#X connect 221 0 185 0;
#X connect 221 0 188 0;
#X connect 222 0 98 0;
#X connect 223 0 97 0;
#X connect 224 0 90 1;
#X connect 225 0 204 1;
#X connect 226 0 203 1;
#X connect 227 0 205 1;
#X connect 228 0 206 1;
